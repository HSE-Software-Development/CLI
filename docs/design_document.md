# Введение
## Назначение
Документ описывает архитектуру CLI-приложения в соответствии с IEEE 42010:2011 с целью обеспечения согласованности разработки, поддержки и расширения.
## Заинтересованные стороны
- Разработчики
- Пользователи

# Архитектурное описание
## Архитектурные представления
### Контекст системы
Приложение взаимодействует с:
- Пользователем (ввод команд)
- Операционной системой (выполнение внешних команд)
- Файловой системой (чтение и запись файлов)

### Логическое представление
Элементы архитектуры:
| Компонент      | Описание                                                                 |
|----------------|--------------------------------------------------------------------------|
| Environment    | Хранит переменные окружения (map[string]string).                         |
| InputHandler   | Считывает ввод в цикле, передает строки в Parser.                        |
| Parser         | Разбивает команды на pipeline, подставляет переменные.                   |
| Executor       | Запускает команды: встроенные (map[string]func) или внешние (os.Exec()).  |

### Поведенческое представление
Взаимодействие элементов:
- InputHandler → Parser : Передача сырой командной строки.
- Environment → Parser : Передача запрашиваемых переменных окружения.
- Parser → Executor : Передача очереди команд с аргументами.
- Executor → Environment : Обновление переменных окружения.

### Представления разработки
- Диаграмма компонентов ([UML](UML.png) Component Diagram).
- Диаграмма последовательности ([Sequence Diagram](sequence_diagram.png)).

# Сопроводительная документация
## Руководство разработчика
### Executor: добавление встроенных команд
- Откройте файл internal/executor/commands.go
- Добавьте функцию с сигнатурой func(*bytes.Buffer) (*bytes.Buffer, error). Она должна принимать буфер, выполнять логику и возвращать модифицированный буфер или ошибку.
- Зарегистрируйте команду в функции newCommands.

### Environment
Управление переменными окружения. Требования:
- Реализовать конструктор для инициализации пустого хранилища переменных.
- Реализовать метод Set для установки переменной.
- Реализовать метод Get для получения значения переменной; если переменная не существует, вернуть ошибку.

### InputHandler
Считывает ввод пользователя и передает Parser. Требования:
- Реализовать бесконечный цикл для ввода через стандартный поток.
- Передавать полученную строку в Parser.

### Parser
Обрабатывает ввод на команды и аргументы, заменяет переменные окружения и строит pipeline. Требования:
- Разбивать строку на команды по символу |.
- Отделять имя команды от аргументов.
- Заменять переменные окружения из Environment.
- Возвращать структуру данных для последовательности команд.

### Executor
Выполняет команды последовательно. Требования:
- Принимать pipeline из Parser.
- Выполнять команды с использованием Executor.
- Передавать результат в качестве входных данных для следующей команды.
- Выводить результат в конец выполнения в стандартный вывод и сообщать InputHandler.

## Руководство пользователя
- Встроенные команды: cat, echo, exit, pwd, wc.
- Команды объединяются в pipeline через |.
- Переменные окружения не сохраняются между запусками.
- Встроенные команды поддерживают базовую функциональность.

## Тестирование
### Юнит-Тестирование
Необходимо для каждого компонента.

### Интеграционное тестирование
Тестирует pipeline полностью, проверяя корректность взаимодействия команд.
