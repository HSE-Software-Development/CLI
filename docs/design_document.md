# Введение
## Цель документа
Описание архитектуры CLI-приложения для обеспечения согласованности разработки, поддержки и расширения.
## Аудитория
Разработчики, пользователи
 
# Общее описание архитектуры
## Элементы архитектуры
| Компонент      | Описание                                                                 |
|----------------|--------------------------------------------------------------------------|
| Environment    | Хранит переменные окружения (map[string]string).                         |
| InputHandler   | Считывает ввод в цикле, передает строки в Parser.                        |
| Parser         | Разбивает команды на pipeline, подставляет переменные.                   |
| PipeLine       | Выполняет команды последовательно, передает буфер между ними.             |
| Executor       | Запускает команды: встроенные (map[string]func) или внешние (os.Exec()).  |
## Контекст системы
Приложение взаимодействует со следующими внешними сущностями
- Пользователь(ввод команд)
- ОС (выполнение внешних команд)
- Файловая система (чтение и запись файлов)

## Взаимодействие элементов
- InputHandler → Parser : Передача сырой командной строки.
- Environment → Parser : Передача запрашиваемых переменных окружения
- Parser → PipeLine : Передача очереди команд с аргументами.
- PipeLine → Executor : Вызов команд с текущим буфером.
- Executor → Environment : Обновление переменных окружения.

# Представления архитектуры
## Logical View
Диаграмма компонентов с их связями ([UML](UML.png) Component Diagram).
## Behavioral View
Диаграмма последовательности действий ([Sequence Diagram](sequence_diagram.png))
## Development View


# Сопроводительная документация
## Руководство разработчика
### Executor: добавление новых встроенных команд
- Откройте файл internal/executor/commands.go
- Добавьте новую функцию , соответствующую сигнатуре func(*bytes.Buffer) (*bytes.Buffer, error). Функция должна принимать буфер с входными данными, выполнять логику команды и возвращать модифицированный буфер или ошибку.
- Зарегистрируйте команду в функции newCommands
### Environment
Хранит и управляет переменными окружения. 
Требуемая функциональность:
- Реализовать конструктор, инициализирует пустое хранилище переменных окружения
- Реализовать метод Set(key string, value string) для установки переменной окружения.
- Реализовать метод Get(key string) (string, error) для получения значения переменной окружения. Если переменная не существует, вернуть ошибку.

### InputHandler
Считывает ввод пользователя и передает его в Parser.
Требуемая функциональность:
- Реализовать бесконечный цикл для считывания ввода пользователя через стандартный ввод (os.Stdin).
- При получении строки передавать её в Parser для дальнейшей обработки.
### Parser 
Разбирает ввод пользователя на команды и аргументы, подставляет переменные окружения и строит pipeline.
Требуемая функциональность:
- Разделять строку на команды по символу | (pipe).
- Для каждой команды отделять имя команды от аргументов.
- Подставлять значения переменных окружения (начинаются с $) из Environment.
- Возвращать структуру данных, представляющую собой последовательность команд (pipeline).
### PipeLine
Выполняет команды последовательно, передавая результат выполнения одной команды в качестве входных данных для следующей
Требуемая функциональность:
- Принимать pipeline (последовательность команд) из Parser.
- Выполнять команды последовательно, используя Executor.
- Передавать результат выполнения предыдущей команды (буфер) в качестве входных данных для следующей.
- В конце выполнения pipeline выводить результат в стандартный вывод, и сообщий InputHandler что закончил обработку операции
## Руководство пользователя
- Встроенные команды: cat, echo, exit, pwd, wc
- Команды можно объединять в pipeline с помощью символа |.
- Переменные окружения не сохраняются между запусками приложения.
- Встроенные команды поддерживают только базовую функциональность
## Тестирования
### Юнит-Тесты
Для каждого компонента должны быть написаны юнит-тесты
### Интеграционные тесты
Тестируйте pipeline целиком, чтобы убедиться, что команды корректно взаимодействуют друг с другом.